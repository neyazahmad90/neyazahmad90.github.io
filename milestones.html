<img src="images/47 years expertise.svg" width="90px" style="position: fixed;bottom: 20px;left: 110px;">
<!-- First fold starting-->
<section class="bg-wall1">
    <div style="font-size: 13rem;position: absolute;top: calc(50% - 156px);text-align:center;width:100%;font-family: 'Museosans';opacity: .45;
            color: rgba(0, 0, 0, 0);text-shadow: #000 7px 3px 22px;">1999</div>
    <div class="jumbotron bg-dots" style="padding:148px 0 83px;">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <div class="row">
                        <div class="col-md-3"></div>
                        <div class="col-md-8">
                            <div class="m-content-block animation-block">
                                <div class="m-top-block">
                                    <div class="m-preheading m-letter-animation">
                                        <span class="letter">For</span>
                                        <span class="letter">maximum</span>
                                        <span class="letter">number</span>
                                        <span class="letter">of</span>
                                        <span class="letter">eye</span>
                                        <span class="letter">surgeries</span>
                                    </div>
                                    <h1 class="m-heading p-b-25 m-line-animation">
                                                        <span class="m-heading-block">PADMA</span>
                                                        <span class="m-heading-block">BHUSHAN</span>
                                                </h1>
                                    <div class="m-quotes m-word-animation">
                                        <div class="split-words">
                                            Lorem ipsum doror sit amet, consectetur adiplscing olit, sad lorem ipsum doror sit amet, consectetur adiplscing olit, sad consectetur adiplscing oli.
                                        </div>
                                        <div>
                                            <div class="m-author pull-right bold" style="float: right;">-Indira Gandhi</div>
                                            <div class="clearfix"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="m-bottom-block">
                                    <div class="m-preheading"><a href="#">See Full Story</a></div>
                                    <div class="m-social-icons">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- First fold ending-->
<!-- Second fold starting -->
<section class="bg-wall2">
    <div class="jumbotron" style="background: initial;padding:148px 0 83px;">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <div class="row">
                        <div class="col-md-3"></div>
                        <div class="col-md-8">
                            <div class="m-content-block animation-block">
                                <div class="m-top-block">
                                    <div class="m-preheading m-letter-animation">
                                        <span class="letter">For</span>
                                        <span class="letter">maximum</span>
                                        <span class="letter">number</span>
                                        <span class="letter">of</span>
                                        <span class="letter">eye</span>
                                        <span class="letter">surgeries</span>
                                    </div>
                                    <h1 class="m-heading p-b-25 m-line-animation">
                                                                    <span class="m-heading-block">PADMA</span>
                                                                    <span class="m-heading-block">BHUSHAN</span>
                                                            </h1>
                                    <div class="m-quotes m-word-animation">
                                        <div class="split-words">
                                            Lorem ipsum doror sit amet, consectetur adiplscing olit, sad lorem ipsum doror sit amet, consectetur adiplscing olit, sad consectetur adiplscing oli.
                                        </div>
                                        <div>
                                            <div class="m-author pull-right bold" style="float: right;">-Indira Gandhi</div>
                                            <div class="clearfix"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="m-bottom-block">
                                    <div class="m-preheading"><a href="#">See Full Story</a></div>
                                    <div class="m-social-icons">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- second fold ending -->
<!-- Third fold starting-->
<section class="bg-purple">
    <div class="jumbotron" style="background:initial;">
        <div class="container">
            <div class="row">
                <div class="col-md-2">
                </div>
                <div class="col-md-8">
                    <div class="m-story">
                        <h1 class="m-parallax-effect m-font-m2" style="text-align: center;background: -webkit-linear-gradient(rgba(142, 63, 129, 0.99), rgba(65, 33, 116, 1));-webkit-background-clip: text;-webkit-text-fill-color: transparent;opacity: 1;margin: 0px;font-size: 7rem;font-weight: 900;text-shadow: blue 1px 1px 1px 1px;">Our Story</h1>
                        <p style="font-size: 1.8rem;position: relative;">
                            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras eget urna non magna hendrerit rutrum in et elit. Phasellus auctor ac urna ac faucibus. Phasellus ut magna justo. Etiam quam eros, placerat quis fringilla vestibulum, fermentum vel nulla. Fusce condimentum pretium ante id posuere. Vivamus tincidunt hendrerit venenatis. Curabitur lobortis tincidunt fringilla. Quisque sagittis dignissim tincidunt. Integer sem magna, vulputate vitae fringilla ac, convallis pulvinar ligula. Ut iaculis, nunc vel ullamcorper molestie, mauris purus luctus erat, quis gravida nisl nunc sit amet mauris. Aliquam erat volutpat. Praesent scelerisque ullamcorper nunc, eu pulvinar ligula maximus ut. Sed turpis dolor, eleifend quis viverra eget, rhoncus convallis neque. In non tellus at magna blandit rhoncus nec dapibus velit. Morbi risus eros, mollis vitae aliquet at, sollicitudin sit amet est. Maecenas bibendum porttitor nibh id dapibus. Fusce vel nibh interdum, molestie purus ut, elementum odio. Cras facilisis, tortor eget consectetur commodo, metus velit consequat enim, at laoreet enim nunc id magna. Proin at augue metus. Quisque fermentum mollis dui. Nam pulvinar, ligula quis dignissim interdum, metus massa lacinia mi, nec volutpat eros justo et lectus. Donec lobortis lectus et commodo tincidunt. Cras eget dui accumsan, malesuada purus vel, pellentesque elit. Donec aliquet efficitur velit, maximus rhoncus magna maximus sed. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- second fold ending -->
<!-- Wrap the rest of the page in another container to center all the content. -->
<!-- /.container -->
<!-- Bootstrap core JavaScript
    ================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script>
function getRandomArbitrary(min, max) {
    return (Math.random() * (max - min) + min).toPrecision(2);
};

function mWordAnimation() { // splitWord selector
    var sw = $('.split-words')[0].innerText;
    var words = sw.split(' ');
    htmlx = '';
    for (var i = 0; i < words.length; i++) {
        delay = getRandomArbitrary(0.1, 2.4);
        htmlx = htmlx + "<div class='word'><div class='word-inner' style='transition-delay: " + delay + "s;'>" + words[i] + "</div></div>&nbsp;";
    }
    $('.split-words').html(htmlx);
    $('.split-words').find('.word').each(function(i, _word) {
        _word.style.width = _word.clientWidth + 'px';
        $(_word).find('.word-inner').css('width', '0px');
    });
}

var startPsrAnimation = function() {
    $('.animation-block').each(function(index, value) {
        if ($(this).hasClass('active'))
            return;
        var top_of_element = jQuery(this).offset().top;
        var bottom_of_element = jQuery(this).offset().top + jQuery(this).outerHeight();
        var top_of_screen = jQuery(window).scrollTop();
        var bottom_of_screen = jQuery(window).scrollTop() + jQuery(window).height();

        if ((bottom_of_screen > top_of_element) && (top_of_screen < bottom_of_element) && (bottom_of_screen - top_of_element > 180)) {
            // The element is visible, do something
            //console.log('visibile'+index);
            $(this).addClass('active');
            $(this).find('.m-line-animation').addClass('m-animate');
            var t = this;
            setTimeout(function() {
                var that = t;
                $(that).find('.m-letter-animation').addClass('m-animate');
                setTimeout(function() {
                    // mWordAnimation($(that).find('.split-words'));
                    $(that).find('.m-word-animation').addClass('m-animate');
                }, 1000);
            }, 600);

        } else {
            //console.log('not');
            // The element is not visible, do something else
        }
    });
}

$(window).on("scroll", function(e) {
    if ($('.m-story h1').visible()) {
        var that = $('.m-story h1');
        calculateOpacity(that, 80);
    }
});
// calculateOpacity = function(that) {
//     var elem_top = $(that).offset().top;
//     var window_top = $(window).scrollTop();
//     var n = $(window).height()/4;
//     var diff = (window_top - elem_top);
//     var o = 1 - ((diff/n) * .1);
//     $(that).css("opacity",o);
//     console.log(o);
//     // var t = 0
//     //   , i = $(window).height()
//     //   , r = 0
//     //   , n = 0;
//     // $('.m-story h1').each(function() {
//     //     t = $(this).offset().top - 500,
//     //     r = i / (t + $(this).height() / 2 + i / 2),
//     //     r > 1 && 2 > r && (console.log(r + " " + n),
//     //     n = 2 - r.toPrecision(2),
//     //     $(this).css("opacity", n))
//     // })


// };

$(document).ready(function() {
    mWordAnimation();
    startPsrAnimation();
    // setTimeout(function(){
    //     $('.animation-block').addClass('active');
    // },300);


});
$('.bg-wall1').mousemove(function(e) {
    var change;
    var xpos = e.clientX;
    var ypos = e.clientY;
    var left = change * 20;
    var xpos = xpos * 2;
    ypos = ypos * 2;
    $('.bg-dots').css('background-position', ((0 + (ypos / 50)) + "px ") + ((0 + (xpos / 80)) + "px"));

});
// #### visible element check
$(window).scroll(function(e) {
    e.preventDefault();
    startPsrAnimation();


});
</script>